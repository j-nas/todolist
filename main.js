(()=>{"use strict";const e=(()=>{null==localStorage.getItem("idcount")&&(localStorage.setItem("idcount","0"),console.log("wut"));let e=+localStorage.getItem("idcount");console.log(e);const t=e=>{localStorage.setItem("tasks",JSON.stringify(e))},a=()=>null==JSON.parse(localStorage.getItem("tasks"))?[]:(console.log(JSON.parse(localStorage.getItem("tasks"))),JSON.parse(localStorage.getItem("tasks")));return{addTitle:(e,n)=>{let s=a(),i=s.filter((t=>t.id==e));s[s.indexOf(i[0])].title=n,t(s)},newTask:()=>{let n=a(),s=(new Date).toISOString().slice(0,10);e+=1,localStorage.setItem("idcount",e),n.push({title:"untitled",id:e,date:s,description:"Add description here",important:!1,complete:!1,project:"Add to a project",subtasks:[]}),t(n)},getTasks:e=>{switch(e){case"all":return JSON.parse(localStorage.getItem("tasks"))}},addDate:(e,t)=>{let a=taskList.filter((t=>t.id==e));taskList[taskList.indexOf(a[0])].date=t},addDesc:(e,t)=>{let a=taskList.filter((t=>t.id==e));taskList[taskList.indexOf(a[0])].description=t},addProject:(e,t)=>{let a=taskList.filter(task=task.id==e);taskList[taskList.indexOf(a[0])].project=t},toggleComplete:e=>{let t=taskList.filter((t=>t.id==e)),a=taskList.indexOf(t[0]);console.log(ompleteIndex),!0===taskList[a].complete?taskList[a].complete=!1:taskList[a].complete=!0},toggleImportant:e=>{let t=taskList.filter((t=>t.id==e)),a=taskList.indexOf(t[0]);!0===taskList[a].important?taskList[a].important=!1:taskList[a].important=!0},getProperty:(e,t)=>{let a=taskList.filter((t=>t.id==e));return taskList[taskList.indexOf(a[0])][t]},pushToLocal:t,returnLocal:a}})();function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function a(e){t(1,arguments);var a=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===a?new Date(e.getTime()):"number"==typeof e||"[object Number]"===a?new Date(e):("string"!=typeof e&&"[object String]"!==a||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function n(e,n){t(2,arguments);var s=a(e),i=a(n),r=s.getTime()-i.getTime();return r<0?-1:r>0?1:r}function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var i=36e5,r={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,d=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,o=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(e,a){t(1,arguments);var n=a||{},i=null==n.additionalDigits?2:s(n.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,l=u(e);if(l.date){var d=m(l.date,i);r=p(d.restDateString,d.year)}if(isNaN(r)||!r)return new Date(NaN);var o,c=r.getTime(),f=0;if(l.time&&(f=g(l.time),isNaN(f)||null===f))return new Date(NaN);if(!l.timezone){var k=new Date(c+f),h=new Date(0);return h.setFullYear(k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate()),h.setHours(k.getUTCHours(),k.getUTCMinutes(),k.getUTCSeconds(),k.getUTCMilliseconds()),h}return o=L(l.timezone),isNaN(o)?new Date(NaN):new Date(c+f+o)}function u(e){var t,a={},n=e.split(r.dateTimeDelimiter);if(n.length>2)return a;if(/:/.test(n[0])?(a.date=null,t=n[0]):(a.date=n[0],t=n[1],r.timeZoneDelimiter.test(a.date)&&(a.date=e.split(r.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){var s=r.timezone.exec(t);s?(a.time=t.replace(s[1],""),a.timezone=s[1]):a.time=t}return a}function m(e,t){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(a);if(!n)return{year:null};var s=n[1]&&parseInt(n[1]),i=n[2]&&parseInt(n[2]);return{year:null==i?s:100*i,restDateString:e.slice((n[1]||n[2]).length)}}function p(e,t){if(null===t)return null;var a=e.match(l);if(!a)return null;var n=!!a[4],s=f(a[1]),i=f(a[2])-1,r=f(a[3]),d=f(a[4]),o=f(a[5])-1;if(n)return function(e,t,a){return t>=1&&t<=53&&a>=0&&a<=6}(0,d,o)?function(e,t,a){var n=new Date(0);n.setUTCFullYear(e,0,4);var s=7*(t-1)+a+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+s),n}(t,d,o):new Date(NaN);var c=new Date(0);return function(e,t,a){return t>=0&&t<=11&&a>=1&&a<=(h[t]||(T(e)?29:28))}(t,i,r)&&function(e,t){return t>=1&&t<=(T(e)?366:365)}(t,s)?(c.setUTCFullYear(t,i,Math.max(s,r)),c):new Date(NaN)}function f(e){return e?parseInt(e):1}function g(e){var t=e.match(d);if(!t)return null;var a=k(t[1]),n=k(t[2]),s=k(t[3]);return function(e,t,a){return 24===e?0===t&&0===a:a>=0&&a<60&&t>=0&&t<60&&e>=0&&e<25}(a,n,s)?a*i+6e4*n+1e3*s:NaN}function k(e){return e&&parseFloat(e.replace(",","."))||0}function L(e){if("Z"===e)return 0;var t=e.match(o);if(!t)return 0;var a="+"===t[1]?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,s)?a*(n*i+6e4*s):NaN}var h=[31,null,31,30,31,30,31,31,30,31,30,31];function T(e){return e%400==0||e%4==0&&e%100}(()=>{const t=()=>{const e=document.createElement("div");e.classList.add("titlebar"),container.appendChild(e);const t=document.createElement("div");t.classList.add("waterDrop"),t.innerHTML='<i class="fas fa-bars"></i>',e.appendChild(t);const a=document.createElement("div");a.innerHTML="<h1>Doist</h1>",e.appendChild(a)},a=({label:e,dataset:t})=>({label:e,dataset:t}),s=[a({label:'<i class="fas fa-plus"></i> Add Project',dataset:"add"}),a({label:"All Projects",dataset:"all"}),a({label:"Today",dataset:"today"}),a({label:"This Week",dataset:"week"}),a({label:"Important",dataset:"important"}),a({label:"Completed",dataset:"completed"})],i=(...e)=>{const t=document.querySelector(".menu");if(t.innerHTML="",!1===e.length)for(let a=e.length-1;a>=0;a++){console.log(s[a]);let n=document.createElement("div");n.classList.add("menuItem"),n.setAttribute("data-menu",`${e[a].id}`),t.appendChild(n)}for(let e=0;e<s.length;e++){let a=document.createElement("div");a.classList.add("menuItem"),a.setAttribute("data-menu",`${s[e].dataset}`),a.innerHTML=s[e].label,t.appendChild(a)}l()};let r="all";const l=()=>{Array.from(document.querySelectorAll(".menuItem")).forEach((e=>e.classList.remove("selected"))),document.querySelector(`[data-menu="${r}"]`).classList.add("selected")},d=()=>{let t=document.querySelector(".contentArea");t.innerHTML="";let a=e.getTasks(r);if(null!==e.getTasks(r))for(let e=0;e<a.length;e++){let s=document.createElement("div");s.classList.add("task"),t.appendChild(s);let i=document.createElement("div");i.classList.add("taskTitle"),s.appendChild(i);let r=document.createElement("div");r.classList.add("taskName"),r.setAttribute("data-task",`${a[e].id}`),r.innerHTML=`<span><i class="fas fa-minus"></i></span> ${a[e].title}`,i.appendChild(r);let l=document.createElement("div");l.classList.add("taskProject"),l.setAttribute("data-task",`${a[e].id}`),l.innerText=a[e].project,i.appendChild(l);let d=document.createElement("div");d.classList.add("taskDate"),d.setAttribute("data-task",`${a[e].id}`),d.innerHTML=`<input type="date" id="taskDate" value="${a[e].date}">`,n(c(a[e].date),c((new Date).toISOString().slice(0,10)))<0&&(d.style.color="red"),i.appendChild(d);let o=document.createElement("div");o.classList.add("taskDesc"),o.setAttribute("data-task",`${a[e].id}`),o.innerHTML=`<textarea resize="none" name="" id="description">${a[e].description}</textarea>`,s.appendChild(o);let u=document.createElement("div");u.classList.add("subTasks"),s.appendChild(u);for(let t=0;t<a[e].subtasks.length;t++){let n=document.createElement("div");n.classList.add("subtask"),n.setAttribute("data-task",`${a[e].id}`),n.innerHTML='<i class="fas fa-minus"></i> '+a[e].subtasks[t],u.appendChild(n)}let m=document.createElement("div");m.classList.add("subtask"),m.id="newSubtask",m.setAttribute("data-task",`${a[e].id}`),m.innerHTML='<i class="fas fa-plus"></i> New subtask',u.appendChild(m);let p=document.createElement("div");p.classList.add("taskFooter"),1==a[e].complete&&(p.style.backgroundColor="green",p.style.color="white"),s.appendChild(p);let f=document.createElement("div");f.classList.add("taskComplete"),f.innerHTML='<i class="fas fa-check"></i> Task Complete',p.appendChild(f);let g=document.createElement("div");g.classList.add("taskImportant"),g.innerHTML='<i class="fas fa-exclamation"></i>',1==a[e].complete&&(g.style.backgroundColor="red"),p.appendChild(g)}let s=document.createElement("div");s.classList.add("addNewTask"),s.innerHTML='<i class="fas fa-plus"></i> <span> New Task</span>',t.appendChild(s)};return{base:()=>{const e=document.querySelector("#container");e.innerHTML="",t();const a=document.createElement("div");a.classList.add("menu"),e.appendChild(a),i();const n=document.createElement("div");n.classList.add("contentArea"),e.appendChild(n),d()},menu:i,drawCards:d,setMenuItem:e=>{r=e}}})().base(),document.querySelector(".addNewTask").addEventListener("click",(()=>{e.newTask()})),console.log(e.getTasks("all"))})();