(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var a=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===a?new Date(t.getTime()):"number"==typeof t||"[object Number]"===a?new Date(t):("string"!=typeof t&&"[object String]"!==a||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function a(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function r(r,n){e(1,arguments);var s=n||{},d=s.locale,l=d&&d.options&&d.options.weekStartsOn,i=null==l?0:a(l),o=null==s.weekStartsOn?i:a(s.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=t(r),u=c.getDay(),m=(u<o?7:0)+u-o;return c.setDate(c.getDate()-m),c.setHours(0,0,0,0),c}function n(t,a,n){e(2,arguments);var s=r(t,n),d=r(a,n);return s.getTime()===d.getTime()}var s=36e5,d={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,i=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,o=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(t,r){e(1,arguments);var n=r||{},s=null==n.additionalDigits?2:a(n.additionalDigits);if(2!==s&&1!==s&&0!==s)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var d,l=u(t);if(l.date){var i=m(l.date,s);d=p(i.restDateString,i.year)}if(isNaN(d)||!d)return new Date(NaN);var o,c=d.getTime(),g=0;if(l.time&&(g=k(l.time),isNaN(g)||null===g))return new Date(NaN);if(!l.timezone){var f=new Date(c+g),w=new Date(0);return w.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),w.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),w}return o=b(l.timezone),isNaN(o)?new Date(NaN):new Date(c+g+o)}function u(e){var t,a={},r=e.split(d.dateTimeDelimiter);if(r.length>2)return a;if(/:/.test(r[0])?(a.date=null,t=r[0]):(a.date=r[0],t=r[1],d.timeZoneDelimiter.test(a.date)&&(a.date=e.split(d.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){var n=d.timezone.exec(t);n?(a.time=t.replace(n[1],""),a.timezone=n[1]):a.time=t}return a}function m(e,t){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(a);if(!r)return{year:null};var n=r[1]&&parseInt(r[1]),s=r[2]&&parseInt(r[2]);return{year:null==s?n:100*s,restDateString:e.slice((r[1]||r[2]).length)}}function p(e,t){if(null===t)return null;var a=e.match(l);if(!a)return null;var r=!!a[4],n=g(a[1]),s=g(a[2])-1,d=g(a[3]),i=g(a[4]),o=g(a[5])-1;if(r)return function(e,t,a){return t>=1&&t<=53&&a>=0&&a<=6}(0,i,o)?function(e,t,a){var r=new Date(0);r.setUTCFullYear(e,0,4);var n=7*(t-1)+a+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+n),r}(t,i,o):new Date(NaN);var c=new Date(0);return function(e,t,a){return t>=0&&t<=11&&a>=1&&a<=(w[t]||(v(e)?29:28))}(t,s,d)&&function(e,t){return t>=1&&t<=(v(e)?366:365)}(t,n)?(c.setUTCFullYear(t,s,Math.max(n,d)),c):new Date(NaN)}function g(e){return e?parseInt(e):1}function k(e){var t=e.match(i);if(!t)return null;var a=f(t[1]),r=f(t[2]),n=f(t[3]);return function(e,t,a){return 24===e?0===t&&0===a:a>=0&&a<60&&t>=0&&t<60&&e>=0&&e<25}(a,r,n)?a*s+6e4*r+1e3*n:NaN}function f(e){return e&&parseFloat(e.replace(",","."))||0}function b(e){if("Z"===e)return 0;var t=e.match(o);if(!t)return 0;var a="+"===t[1]?-1:1,r=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,n)?a*(r*s+6e4*n):NaN}var w=[31,null,31,30,31,30,31,31,30,31,30,31];function v(e){return e%400==0||e%4==0&&e%100}const S=(()=>{null==localStorage.getItem("idcount")&&localStorage.setItem("idcount","0");let r=+localStorage.getItem("idcount");const s=e=>{localStorage.setItem("tasks",JSON.stringify(e))},d=()=>null==JSON.parse(localStorage.getItem("tasks"))?[]:JSON.parse(localStorage.getItem("tasks"));return{addTitle:(e,t)=>{let a=d(),r=a.filter((t=>t.id==e));a[a.indexOf(r[0])].title=t,s(a)},newTask:()=>{let e=d(),t=(new Date).toISOString().slice(0,10);r+=1,localStorage.setItem("idcount",r),e.push({title:"untitled",id:r,date:t,description:"Add description here",important:!1,complete:!1,project:"Add to a project",subtasks:[]}),s(e)},deleteTask:e=>{let t=d();t=t.filter((t=>t.id!=e)),s(t)},getTasks:r=>{let s=function(r,n){e(1,arguments);var s=n||{},d=s.locale,l=d&&d.options&&d.options.weekStartsOn,i=null==l?0:a(l),o=null==s.weekStartsOn?i:a(s.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=t(r),u=c.getDay(),m=6+(u<o?-7:0)-(u-o);return c.setDate(c.getDate()+m),c.setHours(23,59,59,999),c}(new Date);switch(r){case"all":return JSON.parse(localStorage.getItem("tasks"));case"today":return JSON.parse(localStorage.getItem("tasks")).filter((e=>e.date==(new Date).toISOString().slice(0,10)));case"week":return JSON.parse(localStorage.getItem("tasks")).filter((t=>function(t,a){return e(2,arguments),n(t,a,{weekStartsOn:1})}(c(t.date),s)));case"important":return JSON.parse(localStorage.getItem("tasks")).filter((e=>1==e.important));case"complete":return JSON.parse(localStorage.getItem("tasks")).filter((e=>1==e.complete));default:return JSON.parse(localStorage.getItem("tasks")).filter((e=>e.project==r))}},addDate:(e,t)=>{let a=d(),r=a.filter((t=>t.id==e));a[a.indexOf(r[0])].date=t,s(a)},addDesc:(e,t)=>{let a=d(),r=a.filter((t=>t.id==e));a[a.indexOf(r[0])].description=t,s(a)},addProject:(e,t)=>{let a=d(),r=a.filter((t=>t.id==e));a[a.indexOf(r[0])].project=t,s(a)},toggleComplete:e=>{let t=d(),a=t.filter((t=>t.id==e)),r=t.indexOf(a[0]);!0===t[r].complete?t[r].complete=!1:t[r].complete=!0,s(t)},toggleImportant:e=>{let t=d(),a=t.filter((t=>t.id==e)),r=t.indexOf(a[0]);!0===t[r].important?t[r].important=!1:t[r].important=!0,s(t)},getProperty:(e,t)=>{let a=taskList.filter((t=>t.id==e));return taskList[taskList.indexOf(a[0])][t]},pushToLocal:s,returnLocal:d,newSubTask:e=>{let t=d(),a=t.filter((t=>t.id==e)),r=t[t.indexOf(a[0])].subtasks.length;t[t.indexOf(a[0])].subtasks.push(`sbtasuk ${r}`),s(t)},delSubtask:(e,t)=>{let a=d(),r=a.filter((t=>t.id==e));a[a.indexOf(r[0])].subtasks=a[a.indexOf(r[0])].subtasks.filter((e=>e!==t)),s(a)},editSubtask:(e,t,a)=>{let r=d(),n=r.filter((t=>t.id==e)),l=r[r.indexOf(n[0])].subtasks.indexOf(t);r[r.indexOf(n[0])].subtasks[l]=a,s(r)}}})(),h=()=>(localStorage.getItem("projects")||localStorage.setItem("projects","[]"),JSON.parse(localStorage.getItem("projects")));function T(a,r){e(2,arguments);var n=t(a),s=t(r),d=n.getTime()-s.getTime();return d<0?-1:d>0?1:d}const C=(()=>{const e='<i class="fas fa-plus"></i>',t='<i class="fas fa-minus"></i>',a='<i class="fas fa-minus sub"></i>',r='<i class="fas fa-exclamation"></i>',n='<i class="fas fa-bars"></i>',s=()=>{const e=document.createElement("div");e.classList.add("titlebar"),container.appendChild(e);const t=document.createElement("div");t.classList.add("waterDrop"),t.innerHTML=n,e.appendChild(t);const a=document.createElement("div");a.innerHTML="<h1>Taske</h1>",e.appendChild(a)},d=({label:e,dataset:t})=>({label:e,dataset:t}),l=[d({label:e+" Add Project",dataset:"add"}),d({label:"All Projects",dataset:"all"}),d({label:"Today",dataset:"today"}),d({label:"This Week",dataset:"week"}),d({label:"Important",dataset:"important"}),d({label:"Completed",dataset:"complete"})],i=()=>{const e=document.querySelector(".menu");e.innerHTML="";let t=h();if(t.length)for(let a=0;a<t.length;a++){let r=document.createElement("div");r.classList.add("menuItem"),r.setAttribute("data-menu",`${t[a]}`),r.innerHTML=`<input type="text data-menu="${t[a]}" \n        id="project" value="${t[a]}">`,e.appendChild(r)}for(let t=0;t<l.length;t++){let a=document.createElement("div");a.classList.add("menuItem"),a.setAttribute("data-menu",`${l[t].dataset}`),a.innerHTML=l[t].label,e.appendChild(a)}u()};let o="all";const u=()=>{Array.from(document.querySelectorAll(".menuItem")).forEach((e=>e.classList.remove("selected"))),document.querySelector(`[data-menu="${o}"]`).classList.add("selected")},m=()=>{let n=document.querySelector(".contentArea");n.innerHTML="";let s=S.getTasks(o);if(null!==S.getTasks(o))for(let d=0;d<s.length;d++){let l=document.createElement("div");l.classList.add("task"),n.appendChild(l);let i=document.createElement("div");i.classList.add("taskTitle"),l.appendChild(i);let o=document.createElement("div");o.classList.add("taskName"),o.setAttribute("data-task",`${s[d].id}`),o.innerHTML=`${t}\n          <input type="text" data-task="${s[d].id}" class="taskNameInput" \n          value="${s[d].title}">`,i.appendChild(o);let u=document.createElement("div");u.classList.add("taskProject"),u.setAttribute("data-task",`${s[d].id}`),u.innerText=s[d].project,i.appendChild(u);let m=document.createElement("div");m.classList.add("taskDate"),m.setAttribute("data-task",`${s[d].id}`),m.innerHTML=`<input type="date" class="taskDate" data-task="${s[d].id}" value="${s[d].date}">`;let p=m.querySelector(".taskDate");T(c(s[d].date),c((new Date).toISOString().slice(0,10)))<0&&(p.style.color="red"),i.appendChild(m);let g=document.createElement("div");g.classList.add("taskDesc"),g.setAttribute("data-task",`${s[d].id}`),g.innerHTML=`<input type="text" data-task="${s[d].id}"class="description" value="${s[d].description}">`,l.appendChild(g);let k=document.createElement("div");if(k.classList.add("subTasks"),l.appendChild(k),!s[d].subTasks)for(let e=0;e<s[d].subtasks.length;e++){let t=document.createElement("div");t.setAttribute("data-task",`${s[d].id}`),t.innerHTML=a+`<input type="text" class="subtask" value="${s[d].subtasks[e]}">`,k.appendChild(t)}let f=document.createElement("div");f.classList.add("newSubtask"),f.id="newSubtask",f.setAttribute("data-task",`${s[d].id}`),f.innerHTML=e+" New subtask",k.appendChild(f);let b=document.createElement("div");b.classList.add("taskFooter"),1==s[d].complete&&(b.style.backgroundColor="green",b.style.color="white"),l.appendChild(b);let w=document.createElement("div");w.classList.add("taskComplete"),w.innerHTML='<i class="fas fa-check"></i> Task Complete',w.setAttribute("data-task",`${s[d].id}`),b.appendChild(w);let v=document.createElement("div");v.classList.add("taskImportant"),v.setAttribute("data-task",`${s[d].id}`),v.innerHTML=r,1==s[d].important&&(v.style.backgroundColor="red"),b.appendChild(v)}let d=document.createElement("div");d.classList.add("addNewTask"),d.innerHTML=`${e}  New Task`,n.appendChild(d)};return{base:()=>{const e=document.querySelector("#container");e.innerHTML="",s();const t=document.createElement("div");t.classList.add("menu"),e.appendChild(t),i();const a=document.createElement("div");a.classList.add("contentArea"),e.appendChild(a),m()},menu:i,drawCards:m,setMenuItem:e=>{o=e},projectMenu:e=>{let a=document.querySelector(`.taskProject[data-task="${e}"]`),r=document.createElement("div");r.classList.add("dropMenu"),a.appendChild(r);let n=h();for(let t=0;t<n.length;t++){let a=document.createElement("div");a.classList.add("projMenuItem"),a.setAttribute("data-proj",e),a.innerHTML=n[t],r.appendChild(a)}let s=document.createElement("div");s.classList.add("projMenuItem","clearProject"),s.setAttribute("data-proj",e),s.innerHTML=t+" Clear Project",r.appendChild(s)}}})();C.base(),(()=>{let e=!1,t="";const a=document.querySelector(".contentArea");a.addEventListener("click",(a=>{switch(a.target.className){case"addNewTask":S.newTask(),C.drawCards();break;case"fas fa-minus":S.deleteTask(a.target.parentNode.dataset.task),C.drawCards();break;case"taskImportant":S.toggleImportant(a.target.dataset.task),C.drawCards();break;case"taskComplete":S.toggleComplete(a.target.dataset.task),C.drawCards();break;case"newSubtask":S.newSubTask(a.target.dataset.task),C.drawCards();break;case"fas fa-minus sub":S.delSubtask(a.target.parentNode.dataset.task,a.target.nextSibling.value),C.drawCards();break;case"taskProject":C.projectMenu(a.target.dataset.task),e=!0;break;case"projMenuItem":S.addProject(a.target.dataset.proj,a.target.innerText),C.drawCards();break;case"projMenuItem clearProject":S.addProject(a.target.dataset.proj,"Add to a project");case"subtask":t=a.target.value;default:1==e&&(e=!1,C.drawCards())}})),a.addEventListener("focusout",(e=>{switch(e.stopPropagation,e.target.className){case"taskNameInput":S.addTitle(e.target.dataset.task,e.target.value),C.drawCards();break;case"description":S.addDesc(e.target.dataset.task,e.target.value),C.drawCards();break;case"taskDate":S.addDate(e.target.dataset.task,e.target.value),C.drawCards();case"subtask":S.editSubtask(e.target.parentNode.dataset.task,t,e.target.value),C.drawCards()}})),document.addEventListener("keydown",(e=>{"Enter"==e.key&&document.getElementById("blur-hack").focus()}))})()})();