(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var a=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===a?new Date(t.getTime()):"number"==typeof t||"[object Number]"===a?new Date(t):("string"!=typeof t&&"[object String]"!==a||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function a(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function r(r,s){e(1,arguments);var n=s||{},l=n.locale,d=l&&l.options&&l.options.weekStartsOn,i=null==d?0:a(d),o=null==n.weekStartsOn?i:a(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=t(r),u=c.getDay(),m=(u<o?7:0)+u-o;return c.setDate(c.getDate()-m),c.setHours(0,0,0,0),c}function s(t,a,s){e(2,arguments);var n=r(t,s),l=r(a,s);return n.getTime()===l.getTime()}var n=36e5,l={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},d=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,i=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,o=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(t,r){e(1,arguments);var s=r||{},n=null==s.additionalDigits?2:a(s.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var l,d=u(t);if(d.date){var i=m(d.date,n);l=p(i.restDateString,i.year)}if(isNaN(l)||!l)return new Date(NaN);var o,c=l.getTime(),g=0;if(d.time&&(g=f(d.time),isNaN(g)||null===g))return new Date(NaN);if(!d.timezone){var k=new Date(c+g),S=new Date(0);return S.setFullYear(k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate()),S.setHours(k.getUTCHours(),k.getUTCMinutes(),k.getUTCSeconds(),k.getUTCMilliseconds()),S}return o=b(d.timezone),isNaN(o)?new Date(NaN):new Date(c+g+o)}function u(e){var t,a={},r=e.split(l.dateTimeDelimiter);if(r.length>2)return a;if(/:/.test(r[0])?(a.date=null,t=r[0]):(a.date=r[0],t=r[1],l.timeZoneDelimiter.test(a.date)&&(a.date=e.split(l.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){var s=l.timezone.exec(t);s?(a.time=t.replace(s[1],""),a.timezone=s[1]):a.time=t}return a}function m(e,t){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(a);if(!r)return{year:null};var s=r[1]&&parseInt(r[1]),n=r[2]&&parseInt(r[2]);return{year:null==n?s:100*n,restDateString:e.slice((r[1]||r[2]).length)}}function p(e,t){if(null===t)return null;var a=e.match(d);if(!a)return null;var r=!!a[4],s=g(a[1]),n=g(a[2])-1,l=g(a[3]),i=g(a[4]),o=g(a[5])-1;if(r)return function(e,t,a){return t>=1&&t<=53&&a>=0&&a<=6}(0,i,o)?function(e,t,a){var r=new Date(0);r.setUTCFullYear(e,0,4);var s=7*(t-1)+a+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+s),r}(t,i,o):new Date(NaN);var c=new Date(0);return function(e,t,a){return t>=0&&t<=11&&a>=1&&a<=(S[t]||(w(e)?29:28))}(t,n,l)&&function(e,t){return t>=1&&t<=(w(e)?366:365)}(t,s)?(c.setUTCFullYear(t,n,Math.max(s,l)),c):new Date(NaN)}function g(e){return e?parseInt(e):1}function f(e){var t=e.match(i);if(!t)return null;var a=k(t[1]),r=k(t[2]),s=k(t[3]);return function(e,t,a){return 24===e?0===t&&0===a:a>=0&&a<60&&t>=0&&t<60&&e>=0&&e<25}(a,r,s)?a*n+6e4*r+1e3*s:NaN}function k(e){return e&&parseFloat(e.replace(",","."))||0}function b(e){if("Z"===e)return 0;var t=e.match(o);if(!t)return 0;var a="+"===t[1]?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,s)?a*(r*n+6e4*s):NaN}var S=[31,null,31,30,31,30,31,31,30,31,30,31];function w(e){return e%400==0||e%4==0&&e%100}const v=(()=>{null==localStorage.getItem("idcount")&&localStorage.setItem("idcount","0");let r=+localStorage.getItem("idcount");const n=e=>{localStorage.setItem("tasks",JSON.stringify(e))},l=()=>null==JSON.parse(localStorage.getItem("tasks"))?[]:JSON.parse(localStorage.getItem("tasks"));return{addTitle:(e,t)=>{let a=l(),r=a.filter((t=>t.id==e));a[a.indexOf(r[0])].title=t,n(a)},newTask:()=>{let e=l(),t=(new Date).toISOString().slice(0,10);r+=1,localStorage.setItem("idcount",r),e.push({title:"untitled",id:r,date:t,description:"Add description here",important:!1,complete:!1,project:"Add to a project",subtasks:[]}),n(e)},deleteTask:e=>{let t=l();t=t.filter((t=>t.id!=e)),n(t)},getTasks:r=>{let n=function(r,s){e(1,arguments);var n=s||{},l=n.locale,d=l&&l.options&&l.options.weekStartsOn,i=null==d?0:a(d),o=null==n.weekStartsOn?i:a(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=t(r),u=c.getDay(),m=6+(u<o?-7:0)-(u-o);return c.setDate(c.getDate()+m),c.setHours(23,59,59,999),c}(new Date);switch(r){case"all":return JSON.parse(localStorage.getItem("tasks"));case"today":return JSON.parse(localStorage.getItem("tasks")).filter((e=>e.date==(new Date).toISOString().slice(0,10)));case"week":return JSON.parse(localStorage.getItem("tasks")).filter((t=>function(t,a){return e(2,arguments),s(t,a,{weekStartsOn:1})}(c(t.date),n)));case"important":return JSON.parse(localStorage.getItem("tasks")).filter((e=>1==e.important));case"complete":return JSON.parse(localStorage.getItem("tasks")).filter((e=>1==e.complete));default:return JSON.parse(localStorage.getItem("tasks")).filter((e=>e.project==r))}},addDate:(e,t)=>{let a=l(),r=a.filter((t=>t.id==e));a[a.indexOf(r[0])].date=t,n(a)},addDesc:(e,t)=>{let a=l(),r=a.filter((t=>t.id==e));a[a.indexOf(r[0])].description=t,n(a)},addProject:(e,t)=>{let a=l(),r=a.filter((t=>t.id==e));a[a.indexOf(r[0])].project=t,n(a)},toggleComplete:e=>{let t=l(),a=t.filter((t=>t.id==e)),r=t.indexOf(a[0]);!0===t[r].complete?t[r].complete=!1:t[r].complete=!0,n(t)},toggleImportant:e=>{let t=l(),a=t.filter((t=>t.id==e)),r=t.indexOf(a[0]);!0===t[r].important?t[r].important=!1:t[r].important=!0,n(t)},pushToLocal:n,returnLocal:l,newSubTask:e=>{let t=l(),a=t.filter((t=>t.id==e)),r=t[t.indexOf(a[0])].subtasks.length;t[t.indexOf(a[0])].subtasks.push(`sbtasuk ${r}`),n(t)},delSubtask:(e,t)=>{let a=l(),r=a.filter((t=>t.id==e));a[a.indexOf(r[0])].subtasks=a[a.indexOf(r[0])].subtasks.filter((e=>e!==t)),n(a)},editSubtask:(e,t,a)=>{let r=l(),s=r.filter((t=>t.id==e)),d=r[r.indexOf(s[0])].subtasks.indexOf(t);r[r.indexOf(s[0])].subtasks[d]=a,n(r)}}})(),h=()=>(localStorage.getItem("projects")||localStorage.setItem("projects","[]"),JSON.parse(localStorage.getItem("projects"))),y=()=>{let e=JSON.parse(localStorage.getItem("projects"));e.push(`new project ${e.length+1}`),localStorage.setItem("projects",JSON.stringify(e))},N=e=>{let t=JSON.parse(localStorage.getItem("projects"));t=t.filter((t=>t!==e)),localStorage.setItem("projects",JSON.stringify(t))},T=(e,t)=>{let a=JSON.parse(localStorage.getItem("projects")),r=a.indexOf(e);a[r]=t,localStorage.setItem("projects",JSON.stringify(a))};function C(a,r){e(2,arguments);var s=t(a),n=t(r),l=s.getTime()-n.getTime();return l<0?-1:l>0?1:l}const I=(()=>{const e='<i class="fas fa-plus"></i>',t='<i class="fas fa-minus"></i>',a='<i class="fas fa-minus sub"></i>',r='<i class="fas fa-exclamation"></i>',s='<i class="fas fa-bars"></i>',n='<i class="far fa-edit"></i>',l=()=>{const e=document.createElement("div");e.classList.add("titlebar"),container.appendChild(e);const t=document.createElement("div");t.classList.add("waterDrop"),t.innerHTML=s,e.appendChild(t);const a=document.createElement("div");a.innerHTML="<h1>Taske</h1>",e.appendChild(a)},d=({label:e,dataset:t})=>({label:e,dataset:t}),i=[d({label:e+" Add Project",dataset:"add"}),d({label:"All Projects",dataset:"all"}),d({label:"Today",dataset:"today"}),d({label:"This Week",dataset:"week"}),d({label:"Important",dataset:"important"}),d({label:"Completed",dataset:"complete"}),d({label:e+" Add New Task",dataset:"newTask"})],o=e=>{const a=document.querySelector(".menu");a.innerHTML="";let r=h();if(r.length)for(let e=0;e<r.length;e++){let s=document.createElement("div");s.classList.add("menuItem"),s.setAttribute("data-menu",`${r[e]}`),s.innerHTML=t+" "+n+" "+r[e],a.appendChild(s)}for(let e=0;e<i.length;e++){let t=document.createElement("div");t.classList.add("menuItem"),t.setAttribute("data-menu",`${i[e].dataset}`),t.innerHTML=i[e].label,a.appendChild(t)}m(e)};let u="all";const m=e=>{u=e,Array.from(document.querySelectorAll(".menuItem")).forEach((e=>e.classList.remove("selected"))),document.querySelector(`[data-menu="${u}"]`).classList.add("selected")},p=()=>{let s=document.querySelector(".contentArea");s.innerHTML='Press the <i class="fas fa-bars rotate"></i> button to begin';let n=v.getTasks(u);if(null!==v.getTasks(u)){s.innerHTML="";for(let l=0;l<n.length;l++){let d=document.createElement("div");d.classList.add("task"),s.appendChild(d);let i=document.createElement("div");i.classList.add("taskTitle"),d.appendChild(i);let o=document.createElement("div");o.classList.add("taskName"),o.setAttribute("data-task",`${n[l].id}`),o.innerHTML=`${t}\n          <input type="text" data-task="${n[l].id}" class="taskNameInput" \n          value="${n[l].title}">`,i.appendChild(o);let u=document.createElement("div");u.classList.add("taskProject"),u.setAttribute("data-task",`${n[l].id}`),u.innerText=n[l].project,i.appendChild(u);let m=document.createElement("div");m.classList.add("taskDate"),m.setAttribute("data-task",`${n[l].id}`),m.innerHTML=`<input type="date" class="taskDate" data-task="${n[l].id}" value="${n[l].date}">`;let p=m.querySelector(".taskDate");C(c(n[l].date),c((new Date).toISOString().slice(0,10)))<0&&(p.style.color="red"),i.appendChild(m);let g=document.createElement("div");g.classList.add("taskDesc"),g.setAttribute("data-task",`${n[l].id}`),g.innerHTML=`<input type="text" data-task="${n[l].id}"class="description" value="${n[l].description}">`,d.appendChild(g);let f=document.createElement("div");if(f.classList.add("subTasks"),d.appendChild(f),!n[l].subTasks)for(let e=0;e<n[l].subtasks.length;e++){let t=document.createElement("div");t.setAttribute("data-task",`${n[l].id}`),t.innerHTML=a+`<input type="text" class="subtask" value="${n[l].subtasks[e]}">`,f.appendChild(t)}let k=document.createElement("div");k.classList.add("newSubtask"),k.id="newSubtask",k.setAttribute("data-task",`${n[l].id}`),k.innerHTML=e+" New subtask",f.appendChild(k);let b=document.createElement("div");b.classList.add("taskFooter"),1==n[l].complete&&(b.style.backgroundColor="green",b.style.color="white"),d.appendChild(b);let S=document.createElement("div");S.classList.add("taskComplete"),S.innerHTML='<i class="fas fa-check"></i> Task Complete',S.setAttribute("data-task",`${n[l].id}`),b.appendChild(S);let w=document.createElement("div");w.classList.add("taskImportant"),w.setAttribute("data-task",`${n[l].id}`),w.innerHTML=r,1==n[l].important&&(w.style.backgroundColor="red"),b.appendChild(w)}}};return{base:()=>{const e=document.querySelector("#container");l();const t=document.createElement("div");t.classList.add("menu"),t.style.visibility="hidden",e.appendChild(t),o("all");const a=document.createElement("div");a.classList.add("contentArea"),a.innerHTML=e.appendChild(a),p()},menu:o,drawCards:p,getSelectedMenuItem:()=>u,projectMenu:e=>{let a=document.querySelector(`.taskProject[data-task="${e}"]`),r=document.createElement("div");r.classList.add("dropMenu"),a.appendChild(r);let s=h();for(let t=0;t<s.length;t++){let a=document.createElement("div");a.classList.add("projMenuItem"),a.setAttribute("data-proj",e),a.innerHTML=s[t],r.appendChild(a)}let n=document.createElement("div");n.classList.add("projMenuItem","clearProject"),n.setAttribute("data-proj",e),n.innerHTML=t+" Clear Project",r.appendChild(n)},menuSelection:m}})();I.base(),(()=>{let e=!1,t="";const a=document.querySelector(".contentArea"),r=document.querySelector(".menu"),s=document.querySelector(".fa-bars");document.querySelector(".titlebar").addEventListener("click",(e=>"fas fa-bars"==e.target.className&&"hidden"==r.style.visibility?(r.style.visibility="visible",void(s.style.transform="rotate(45deg)")):"fas fa-bars"===e.target.className&&"visible"==r.style.visibility?(r.style.visibility="hidden",void(s.style.transform="")):void 0)),a.addEventListener("click",(a=>{switch(a.target.className){case"addNewTask":v.newTask(),I.drawCards();break;case"fas fa-minus":v.deleteTask(a.target.parentNode.dataset.task),I.drawCards();break;case"taskImportant":v.toggleImportant(a.target.dataset.task),I.drawCards();break;case"taskComplete":v.toggleComplete(a.target.dataset.task),I.drawCards();break;case"newSubtask":v.newSubTask(a.target.dataset.task),I.drawCards();break;case"fas fa-minus sub":v.delSubtask(a.target.parentNode.dataset.task,a.target.nextSibling.value),I.drawCards();break;case"taskProject":I.projectMenu(a.target.dataset.task),e=!0;break;case"projMenuItem":v.addProject(a.target.dataset.proj,a.target.innerText),I.drawCards();break;case"projMenuItem clearProject":v.addProject(a.target.dataset.proj,"Add to a project");case"subtask":t=a.target.value;default:1==e&&(e=!1,I.drawCards())}})),a.addEventListener("focusout",(e=>{switch(e.stopPropagation,e.target.className){case"taskNameInput":v.addTitle(e.target.dataset.task,e.target.value),I.drawCards();break;case"description":v.addDesc(e.target.dataset.task,e.target.value),I.drawCards();break;case"taskDate":v.addDate(e.target.dataset.task,e.target.value),I.drawCards();case"subtask":v.editSubtask(e.target.parentNode.dataset.task,t,e.target.value),I.drawCards()}})),r.addEventListener("click",(e=>{if(e.stopImmediatePropagation(),"menuItem"==e.target.className){switch(e.target.dataset.menu){case"all":I.menu("all"),I.drawCards();break;case"today":I.menu("today"),I.drawCards();break;case"week":I.menu("week"),I.drawCards();break;case"important":I.menu("important"),I.drawCards();break;case"complete":I.menu("complete"),I.drawCards();break;case"newTask":v.newTask(),I.drawCards();break;case"add":y(),I.menu(I.getSelectedMenuItem());break;default:I.menu(e.target.dataset.menu),I.drawCards()}s.style.transform="",r.style.visibility="hidden"}"fas fa-minus"==e.target.className&&(N(e.target.parentNode.dataset.menu),I.menu("all"),I.drawCards()),"far fa-edit"==e.target.className&&(e.target.parentNode.innerHTML=`<input type="text" class="menuItem "id="projectEdit" \n        value="${e.target.parentNode.dataset.menu}">`,document.querySelector("#projectEdit").focus())})),r.addEventListener("focusout",(e=>{T(e.target.parentNode.dataset.menu,e.target.value),I.menu(I.getSelectedMenuItem)})),document.addEventListener("keydown",(e=>{"Enter"==e.key&&document.getElementById("blur-hack").focus()}))})()})();